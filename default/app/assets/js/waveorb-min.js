!function(){var e=async function(e,n){var t=1,o=1e3,r=1001,i="$cbid";n||(n={}),void 0!==n.reconnect&&!0!==n.reconnect||(n.reconnect=1e3),!0===n.ping&&(n.ping=1e3),void 0===n.disconnect&&(n.disconnect=3e3);for(var c,s,a,f,u,d={},p=["message","open","close","error"],l=0;l<p.length;l++)d[p[l]]=[];function v(e,...n){for(var t=0;t<d[e].length;t++)d[e][t](...n)}function g(t,o){s={},a=0,(c=new WebSocket(e)).onmessage=function(e){var n=JSON.parse(e.data),t=n[i];t?(delete n[i],s[t]&&(s[t](n,e),delete s[t])):v("message",n,e)},c.onopen=function(e){t&&t(w),v("open",w,e),n.ping&&(clearInterval(f),clearTimeout(u),f=setInterval(function(){m({$ping:1})},n.ping),u=setTimeout(function(){clearInterval(f),h(r)},n.disconnect))},c.onerror=function(e){o&&o(e),v("error",e)},c.onclose=function(e){n.reconnect&&setTimeout(g,n.reconnect),v("close",e)}}function h(e){e=e||o,c.close(e)}function m(e){c.readyState===t&&c.send(JSON.stringify(e))}var w={on:function(e,n){d[e].push(n)},connect:g,send:m,fetch:function(e){return new Promise(function(n){e[i]=++a,s[a]=function(e){n(e)},m(e)})},disconnect:h};return new Promise(g)};window.waveorb=function(n,t={}){return n.indexOf("ws")?function(e={},t={}){return function(e,n,t){return new Promise(function(o,r){t||(t={}),n||(n={});var i,c=new XMLHttpRequest;if(c.addEventListener("load",function(){var e=JSON.parse(c.responseText);o(e)}),c.addEventListener("error",function(){r(c)}),c.open(t.method||"POST",e+(t.path||"")),t.files){for(var s in i=new FormData,n)i.append(s,JSON.stringify(n[s]));for(var a of t.files)i.append("file",a,a.name);t.progress&&c.upload.addEventListener("progress",function(e){e.percent=(e.loaded/e.total*100).toFixed(2),t.progress(e)})}else c.setRequestHeader("Content-Type","application/json; charset=utf-8");if(t.headers)for(var s in t.headers)c.setRequestHeader(s,t.headers[s]);c.withCredentials=!0,c.send(i||JSON.stringify(n))})}(n,e,t)}:new Promise(function(o){e(n,t).then(function(e){return o(e.fetch)})})}}();